<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.6.2/joint.css" />
</head>

<body>
    <div id="myholder"></div>

    <!---dependencies-->
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="node_modules/lodash/lodash.js"></script>
    <script src="node_modules/backbone/backbone.js"></script>
    <script src="node_modules/jointjs/dist/joint.js"></script>

    <script type="text/javascript">

        var namespace = joint.shapes;
        console.log(`this is the namespace ${JSON.stringify(namespace)}`)
        var graph = new joint.dia.Graph({}, { cellNamespace: namespace });

        var paper = new joint.dia.Paper({
            el: document.getElementById('myholder'),
            model: graph,
            width: 1920,
            height: 1080,
            gridSize: 10,
            drawGrid: true,
            background: {
                color: "rgba(154,255,0,0.3)"
            },
            cellViewNamespace: namespace
        });



        var rect3 = new joint.shapes.standard.Rectangle();
        rect3.resize(100, 40)
        rect3.position(100, 130)
        rect3.attr({
            body: {
                fill: "#E74C3C",
                rx: 20,
                ry: 20,
                strokeWidth: 0
            },
            label: {
                text: "Hello",
                fill: "#ECF0F1",
                fontSize: 11,
                fontVariant: 'small-caps'
            }
        })
        rect3.addTo(graph)

        var rect4 = new joint.shapes.standard.Rectangle()

        rect4.resize(100, 40)
        rect4.position(400, 130)
        rect4.attr({
            body: {
                fill: '#8E44AD',
                strokeWidth: 0
            },
            label: {
                text: 'World!',
                fill: 'white',
                fontSize: 13
            }
        })
        rect4.addTo(graph);


        var link = new joint.shapes.standard.Link();
        link.source(rect3, {
            // anchor: {
            //     name: 'center',
            //     args: {
            //         dx: 30
            //     }
            // }
        });
        link.target(rect4, {
            anchor: {
                name: 'center',
                args: {
                    dx: -30
                }
            },
            connectionPoint: {
                name: 'boundary'
            }
        });
        link.vertices([
            { x: 130, y: 180 },
            { x: 400, y: 180 }
        ]);
        link.addTo(graph);

        var verticesTool = new joint.linkTools.Vertices();
        var segmentsTool = new joint.linkTools.Segments();
        var sourceArrowheadTool = new joint.linkTools.SourceArrowhead();
        var targetArrowheadTool = new joint.linkTools.TargetArrowhead();
        var sourceAnchorTool = new joint.linkTools.SourceAnchor();
        var targetAnchorTool = new joint.linkTools.TargetAnchor();
        var boundaryTool = new joint.linkTools.Boundary();
        var removeButton = new joint.linkTools.Remove({
            distance: 20
        });

        var toolsView = new joint.dia.ToolsView({
            tools: [
                verticesTool, segmentsTool,
                sourceArrowheadTool, targetArrowheadTool,
                sourceAnchorTool, targetAnchorTool,
                boundaryTool, removeButton
            ]
        });

        var linkView = link.findView(paper);
        linkView.addTools(toolsView);
        // link3 = new joint.shapes.standard.Link();
        // link3.source(rect4);
        // link3.target(rect3);
        // link3.connector('jumpover', { size: 15 })

        // link3.vertices([
        //     new g.Point(150, 300),
        //     new g.Point(150, 200)
        // ])
        // link3.addTo(graph);

        // var verticesTool = new joint.linkTools.Vertices();
        // var segmentTool = new joint.linkTools.Segments();
        // var sourceArrowHeadTool = new joint.linkTools.SourceArrowhead();
        // var targetArrowHeadTool = new joint.linkTools.TargetArrowhead();
        // var sourceAnchorTool = new joint.linkTools.SourceAnchor();

        // // attach tools to a toolview
        // var toolsView = new joint.Dia.ToolsView({
        //     tools: [
        //         verticesTool, segmentTool, sourceArrowHeadTool, targetArrowHeadTool, sourceAnchorTool
        //     ]
        // });

        // // attach toolview to a linkview
        // var linkView = link3.findView(paper);
        // linkView.addTools(toolsView);

    </script>


</body>

</html>