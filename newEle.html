<html>

<head>
    <link rel="stylesheet" type="text/css" href="https://cdnjs.cloudflare.com/ajax/libs/jointjs/3.6.2/joint.css" />
</head>

<body>
    <div id="myholder"></div>


    <!---dependencies-->
    <script src="node_modules/jquery/dist/jquery.js"></script>
    <script src="node_modules/lodash/lodash.js"></script>
    <script src="node_modules/backbone/backbone.js"></script>
    <script src="node_modules/jointjs/dist/joint.js"></script>

    <script type="text/javascript">

        var namespace = joint.shapes
        var graph = new joint.dia.Graph({}, { cellNamespace: namespace });

        var paper = new joint.dia.Paper({
            el: document.getElementById('myholder'),
            model: graph,
            width: 1280,
            height: 720,
            gridSize: 10,
            drawGrid: true,
            background: {
                color: "rgba(140,59,110,0.3)"
            },
            cellViewNamespace: namespace
        });

        // Define the SVG markup for the element
        // I learnt CSS and set the width and height of the svgMarkup svgEditorBackgorund to em, i am a god
        var svgMarkup1 = '<g>' +
            '<rect id="svgEditorBackground" x="0" y="0" width="em" height="em" style="fill: none; stroke: none;" />' +
            '<g style="fill:rosybrown;stroke:black;vector-effect:non-scaling-stroke;stroke-width:1px" id="e1_shape" transform="matrix(2.68046 0 0 2.68046 668.263 180.039)" />' +
            '<rect x="113.67" y="62.96" style="fill:gold;stroke:black;stroke-width:1px" id="e2_rectangle" width="155.37" height="58.14" transform="matrix(0.753349 0 0 0.993163 25.5479 0.361935)" />' +
            '<path d="M77.123285,77.597995h34.085175" style="fill:red;stroke:red;stroke-width:3px" id="e4_pathH" />' +
            '<path d="M77.123285,92.634009h34.085175" style="fill:blue;stroke:blue;stroke-width:3px" id="e2_pathH" />' +
            '<path d="M77.123285,108.672424h34.085175" style="fill:mediumseagreen;stroke:mediumseagreen;stroke-width:3px" id="e3_pathH" />' +
            '<path d="M228.485823,85.617203h34.085175" style="fill:red;stroke:red;stroke-width:3px" id="e5_pathH" />' +
            '<path d="M228.485822,102.658018h34.085175" style="fill:blue;stroke:blue;stroke-width:3px" id="e6_pathH" />' +
            '</g>';

        // Define the custom JointJS element
        var myElement1 = joint.shapes.basic.Generic.extend({

            // Set the element's markup to the SVG code
            markup: svgMarkup1,

            // Set the default attributes for the element
            defaults: joint.util.deepSupplement({
                type: 'myElement1',
                size: {
                    width: "em",
                    height: "em"
                },
                attrs: {
                    rect: {
                        'pointer-events': 'boundingBox'
                    },
                    path: {
                        'pointer-events': 'none'
                    }
                }
            }, joint.shapes.basic.Generic.prototype.defaults)
        });

        // Register the element with the graph
        joint.shapes.myElements = myElement1;

        // Create a new instance of the element
        var myElementInstance1 = new joint.shapes.myElements({
            position: { x: 1, y: 1 }
        });
        myElementInstance1.resize(500, 500);
        // Add the element to the graph
        graph.addCell(myElementInstance1);



        var svgMarkup2 = '<g>' +
            '<rect id="svgEditorBackground" x="0" y="0" width="em" height="em" style = "fill: none; stroke: none;" /> ' +
            '<rect x = "372.2061111014" y = "208.730" style = "fill:royalblue;stroke:black;stroke-width:1px" id = "e1_rectangle" width = "83.731" height = "75.7570029623" />' +
            '<line id="e2_line" x1="454.9407327576" y1="208.730" x2="477.8671941803" y2="188.7944273242" style="stroke:black;fill:none;stroke-width:2px" />' +
            '<line id="e3_line" x1="350.277000" y1="303.426000" x2="373.203000" y2="283.491000" style="stroke:black;fill:none;stroke-width:2px" />' +
            '<line id="e4_line" x1="455.936" y1="284.488" x2="475.873" y2="304.431" style="stroke:black;fill:none;stroke-width:2px" />' +
            '<line id="e5_line" x1="349.279" y1="189.793" x2="372.207000" y2="209.736000" style="stroke:black;fill:none;stroke-width:2px" />' +
            '</g>';

        var myElement2 = joint.shapes.basic.Generic.extend({

            // Set the element's markup to the SVG code
            markup: svgMarkup2,

            // Set the default attributes for the element
            defaults: joint.util.deepSupplement({
                type: 'myElement2',
                size: {
                    width: "em",
                    height: "em"
                },
                attrs: {
                    rect: {
                        'pointer-events': 'boundingBox'
                    },
                    path: {
                        'pointer-events': 'none'
                    }
                }
            }, joint.shapes.basic.Generic.prototype.defaults)
        });

        // Register the element with the graph
        joint.shapes.myElements = myElement2;

        // Create a new instance of the element
        var myElementInstance2 = new joint.shapes.myElements({
            position: { x: 1, y: 1 }
        });
        myElementInstance2.resize(50, 50)
        // Add the element to the graph
        graph.addCell(myElementInstance2);


        var svgMarkup3 = '<g>' +
            '<rect id="svgEditorBackground" x="0" y="0" width="em" height="em" style="fill: none; stroke: none;" />' +
            '<rect x="410.2436949299" y="207.3210141809" style="fill:cornflowerblue;stroke:black;stroke-width:1px" id="e1_rectangle" width="126.956" height="29.9892" />' +
            '<rect x="421.24" y="183.332" style="fill:gold;stroke:black;stroke-width:1px" id="e2_rectangle" width="57.9778" height="23.9912" />' +
            '<rect x="428.236839712" y="238.3092079722" style="fill:none;stroke:black;stroke-width:1px" id="e4_rectangle" width="22.9918" height="19.992" />' +
            '<rect x="499.210000" y="237.310000" style="fill:none;stroke:black;stroke-width:1px" id="e3_rectangle" width="22.991800" height="19.992000" />' +
            '<line id="e5_line" x1="438.2330312576" y1="238.3092079722" x2="438.233" y2="270.294" style="stroke:mediumseagreen;fill:none;stroke-width:3px" />' +
            '<line id="e2_line" x1="507.207" y1="237.309" x2="507.207" y2="271.294" style="stroke:red;fill:none;stroke-width:3px" />' +
            '<line id="e3_line" x1="516.204000" y1="237.309000" x2="516.204" y2="271.293" style="stroke:blue;fill:none;stroke-width:3px" />' +
            '<polygon style="stroke:black;fill:gold;stroke-width:1px" id="e7_polygon" points="431.235 183.33 436.234 119.354 445.23 119.355 448.229 183.33" />' +
            '<polygon style="stroke:black;fill:none;stroke-width:1px" id="e8_polygon" points="472.22,181.331,532.197,139.347,536.196,147.344,481.217,189.328" />' +
            '<line id="e4_line" x1="532.198000" y1="144.344000" x2="532.198000" y2="185.329000" style="stroke:black;fill:none;stroke-width:2px" />' +
            '</g>';

        var myElement3 = joint.shapes.basic.Generic.extend({

            // Set the element's markup to the SVG code
            markup: svgMarkup3,

            // Set the default attributes for the element
            defaults: joint.util.deepSupplement({
                type: 'myElement3',
                size: {
                    width: "em",
                    height: "em"
                },
                attrs: {
                    rect: {
                        'pointer-events': 'boundingBox'
                    },
                    path: {
                        'pointer-events': 'none'
                    },
                    line: {
                        'pointer-events': 'boundingBox'
                    }
                }
            }, joint.shapes.basic.Generic.prototype.defaults)
        });

        // Register the element with the graph
        joint.shapes.myElements = myElement3;

        // Create a new instance of the element
        var myElementInstance3 = new joint.shapes.myElements({
            position: { x: 1, y: 1 }
        });
        myElementInstance3.resize(50, 50)
        // Add the element to the graph
        graph.addCell(myElementInstance3);

        var rect = new joint.shapes.standard.Rectangle();
        rect.position(100, 30);
        rect.resize(100, 40);
        rect.attr({
            body: {
                fill: 'blue'
            },
            label: {
                text: 'Hello',
                fill: 'white'
            }
        });
        rect.addTo(graph);

        var standardLink = new joint.shapes.standard.Link()
        standardLink.source({ x: 20, y: 500 })
        standardLink.target({ x: 100, y: 450 })
        var verticesTool = new joint.linkTools.Vertices();
        var segmentsTool = new joint.linkTools.Segments();
        var boundaryTool = new joint.linkTools.Boundary();
        var sourceAnchorTool = new joint.linkTools.SourceAnchor();
        var targetAnchorTool = new joint.linkTools.TargetAnchor();
        var sourceArrowHeadTool = new joint.linkTools.SourceArrowhead();
        var targetArrowHeadTool = new joint.linkTools.TargetArrowhead();
        var removeButton = new joint.linkTools.Remove();

        var toolsView = new joint.dia.ToolsView({
            tools: [verticesTool, segmentsTool, boundaryTool, sourceArrowHeadTool, targetArrowHeadTool, removeButton]
        })
        standardLink.addTo(graph)

        var stdLinkView = standardLink.findView(paper);
        stdLinkView.addTools(toolsView)
        paper.on("link:mouseenter", function (linkView) {
            linkView.addTools(toolsView);
        })

        paper.on("link:mouseleave", function (linkView) {
            linkView.removeTools(toolsView);
        })



    </script>
</body>

</html>